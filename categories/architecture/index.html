<!doctype html><html lang=en-us><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge,chrome=1"><title>Architecture | Sohan's Blog</title>
<meta name=viewport content="width=device-width,minimum-scale=1"><meta name=description content="Sohan's Blog"><meta name=generator content="Hugo 0.121.2"><meta name=robots content="noindex, nofollow"><link rel=stylesheet href=/ananke/css/main.min.css><link href=/categories/architecture/index.xml rel=alternate type=application/rss+xml title="Sohan's Blog"><link href=/categories/architecture/index.xml rel=feed type=application/rss+xml title="Sohan's Blog"><meta property="og:title" content="Architecture"><meta property="og:description" content="Sohan's Blog"><meta property="og:type" content="website"><meta property="og:url" content="http://smsohan.com/categories/architecture/"><meta itemprop=name content="Architecture"><meta itemprop=description content="Sohan's Blog"><meta name=twitter:card content="summary"><meta name=twitter:title content="Architecture"><meta name=twitter:description content="Sohan's Blog"><style>.athelas,.body-text{font-family:helvetica neue,Helvetica,Arial,sans-serif}.body-text div,p,article,section{font-size:1rem;line-height:1.4rem}.athelas.fw1{font-weight:inherit}h1.f1{line-height:4rem}</style></head><body class="ma0 body-text"><header><div class="pb3-m bg-navy"><nav class="pv3 ph3 ph4-ns" role=navigation><div class="flex-l justify-between items-center center"><a href=/ class="f3 fw2 hover-white no-underline white-90 dib">Sohan's Blog</a><div class="flex-l items-center"><ul class="pl0 mr3"><li class="list f5 f4-ns fw4 dib pr3"><a class="hover-white no-underline white-90" href=/home/ title="About page">About</a></li></ul><div class=ananke-socials></div></div></div></nav></div></header><main class=pb7 role=main><article class="cf pa3 pa4-m pa4-l"><div class="measure-wide-l center f4 lh-copy nested-copy-line-height nested-links mid-gray"><p>Below you will find pages that utilize the taxonomy term “Architecture”</p></div></article><div class="mw8 center"><section class="flex-ns flex-wrap justify-around mt5"><div class="relative w-100 mb4 bg-white"><div class="relative w-100 mb4 bg-white nested-copy-line-height"><div class="bg-white mb3 pa4 gray overflow-hidden"><span class="f6 db">Posts</span><h1 class="f3 near-black"><a href=/blog/2020/12/07/tribute-to-rails-date-time-great-invisible-design/ class="link black dim">A Tribute to Time Travel APIs in Ruby on Rails</a></h1><div class="nested-links f5 lh-copy nested-copy-line-height">Good design is obvious. Great design is transparent. — Joe Sparano
Ruby on Rails delighted me all through my career. The community is one with a taste for art, thanks to DHH&rsquo;s ability to write well. He set a high bar and the community also lives up to it. One API that absolutely blows my mind is how delightful it is to work with date and time in Ruby on Rails.</div></div></div></div><div class="relative w-100 mb4 bg-white"><div class="relative w-100 mb4 bg-white nested-copy-line-height"><div class="bg-white mb3 pa4 gray overflow-hidden"><span class="f6 db">Posts</span><h1 class="f3 near-black"><a href=/blog/2019/11/17/how-about-full-stack-micro-services/ class="link black dim">How About Full-Stack Micro-Services?</a></h1><div class="nested-links f5 lh-copy nested-copy-line-height">Source: [Audrey on Flickr](https://flic.kr/p/pUW8f9) I think nobody knows how to stitch together an app with full-stack micro-services. I have the following open-questions if you disagree. Of course, if we could send people to moon, we could solve these problems. But the question is, is it worth and should your team solve these problems? Especially, for small teams?
How to render the UI from tens of independent micro-services into the same web page?</div></div></div></div><div class="relative w-100 mb4 bg-white"><div class="relative w-100 mb4 bg-white nested-copy-line-height"><div class="bg-white mb3 pa4 gray overflow-hidden"><span class="f6 db">Posts</span><h1 class="f3 near-black"><a href=/blog/2019/08/10/software-architecture-is-all-aboout-ugly-boxes-and-lines/ class="link black dim">Software Architecture is all about Ugly Boxes and Lines - My Wishlist</a></h1><div class="nested-links f5 lh-copy nested-copy-line-height">In my last post, I claimed software architecture is all talk and no show. When we have a visible one, it&rsquo;s a bunch of poorly drawn boxes and lines. I don&rsquo;t have a problem with boxes or lines, but I do like beautiful drawings.
Despite many standards, we still mostly use whiteboard drawing of boxes and lines for sharing software design as we build new systems or introduce new team members.</div></div></div></div><div class="relative w-100 mb4 bg-white"><div class="relative w-100 mb4 bg-white nested-copy-line-height"><div class="bg-white mb3 pa4 gray overflow-hidden"><span class="f6 db">Posts</span><h1 class="f3 near-black"><a href=/blog/2019/08/02/all-talk-no-show-software-architecture/ class="link black dim">All Talk No Show: Software Architecture</a></h1><div class="nested-links f5 lh-copy nested-copy-line-height">We have a problem with software architecture. Let&rsquo;s face it. Find the architecture diagrams of the products you&rsquo;re working on and answer these questions:
Did you find it? Does everyone in your team know where to find it? Is it up-to-date? Can you see how this system scales, handles failover, monitors performance, or how it&rsquo;s secured? Can you see how it evolved over time? Can you train a new team-member using this diagram?</div></div></div></div><div class="relative w-100 mb4 bg-white"><div class="relative w-100 mb4 bg-white nested-copy-line-height"><div class="bg-white mb3 pa4 gray overflow-hidden"><span class="f6 db">Posts</span><h1 class="f3 near-black"><a href=/blog/2014/09/25/on-keeping-things-simple/ class="link black dim">On Keeping Things Simple</a></h1><div class="nested-links f5 lh-copy nested-copy-line-height">Software architecture, or any design for that matter, needs to strike a fine balance between simplicity and power. Sometimes, the design needs to deliberately remove elements that&rsquo;d make life better in some way but also cause a lot of frictions in other ways, ways that may not really impact the designer.
A few examples to explain this. Client side MVC frameworks on top of a server side MVC framework. Client side URL routing on top of server side URL routing.</div></div></div></div><div class="relative w-100 mb4 bg-white"><div class="relative w-100 mb4 bg-white nested-copy-line-height"><div class="bg-white mb3 pa4 gray overflow-hidden"><span class="f6 db">Posts</span><h1 class="f3 near-black"><a href=/blog/2014/09/18/monolith-vs-micro-services/ class="link black dim">Monolith vs Microservices</a></h1><div class="nested-links f5 lh-copy nested-copy-line-height">Microservices are talk of the town these days. I wanted to share my thoughts on microservices based on some experiments that we are running into at our current project.
SOURCE: https://www.flickr.com/photos/31366276@N03/9327275207/in/photostream/
Recently, we deployed a microservice for two-step verification feature on one of our projects. This was a strict business requirement, because having a separate server to store your 2nd-factor authorization provides additional security in case the servers hosting your primary factor are compromised.</div></div></div></div><div class="relative w-100 mb4 bg-white"><div class="relative w-100 mb4 bg-white nested-copy-line-height"><div class="bg-white mb3 pa4 gray overflow-hidden"><span class="f6 db">Posts</span><h1 class="f3 near-black"><a href=/blog/2013/04/04/implementation-challenges-with-with-a-saas-database/ class="link black dim">Implementation Challenges with a Multi-Tenant/SaaS Database</a></h1><div class="nested-links f5 lh-copy nested-copy-line-height">{% img right http://farm1.staticflickr.com/21/26445881_7c69777b7b.jpg 500 353 &lsquo;Photo credits to corydalus&rsquo; &lsquo;climbing&rsquo;%}
This 2006 MSDN article points out some key aspects of designing a multi-tenant database for SaaS applications. As you can read in the article, SaaS databases need to pick one of the following three configurations:
separate databases shared database, separate schema and shared database, shared schema. A number of factors including economic, security, skillset, etc. contribute to the selection of the best suitable configuration.</div></div></div></div><div class="relative w-100 mb4 bg-white"><div class="relative w-100 mb4 bg-white nested-copy-line-height"><div class="bg-white mb3 pa4 gray overflow-hidden"><span class="f6 db">Posts</span><h1 class="f3 near-black"><a href=/blog/2013/03/07/solution-architecting/ class="link black dim">Solution Architecting Using Queues?</a></h1><div class="nested-links f5 lh-copy nested-copy-line-height">When building a bunch of applications that need to interact with each other, Queues or Message Oriented Middleware services offer some very useful features. To name a few, you get features like a) Guaranteed message delivery, b) routing, c) throttling, etc., for free. Tools like ActiveMQ, RabbitMQ, MSMQ, JMS servers are tuned and time tested to handle such requirements robustly. I&rsquo;ve had good experience with these tools for the happy paths.</div></div></div></div><div class="relative w-100 mb4 bg-white"><div class="relative w-100 mb4 bg-white nested-copy-line-height"><div class="bg-white mb3 pa4 gray overflow-hidden"><span class="f6 db">Posts</span><h1 class="f3 near-black"><a href=/blog/2013/02/25/practial-challenges-with-client-side-mvc/ class="link black dim">Practical API Design Challenges for Client Side MVC</a></h1><div class="nested-links f5 lh-copy nested-copy-line-height">This following list is probably a subset of a bigger one, but I&rsquo;ve composed it based on my experience using BackboneJS + Rails on the current project at work. So, here goes the list:
###Designing Granularity of the API###
Using RESTful API, it makes sense to have separate API methods to repesent each type of resource. However, to construct a meaninful UI for the end user, often time we need to represent multiple resources on the same screen.</div></div></div></div><div class="relative w-100 mb4 bg-white"><div class="relative w-100 mb4 bg-white nested-copy-line-height"><div class="bg-white mb3 pa4 gray overflow-hidden"><span class="f6 db">Posts</span><h1 class="f3 near-black"><a href=/blog/2013/01/17/abusing-json/ class="link black dim">MongoDB is Abusing JSON!</a></h1><div class="nested-links f5 lh-copy nested-copy-line-height">I find the MongoDB API is abusing JSON in a really bad way. JSON is probably a good format for storing the documents in MongoDB, but using JSON for it&rsquo;s weird API is simply a terrible idea. Here&rsquo;s an example from the SQL to Aggregation Framework Mapping Chart
db.orders.aggregate( [ { $group: { _id: { cust_id: "$cust_id", ord_date: "$ord_date" }, total: { $sum: "$price" } } }, { $match: { total: { $gt: 250 } } } ] ) I find the UI of this query to be distasteful at the best.</div></div></div></div><div class="relative w-100 mb4 bg-white"><div class="relative w-100 mb4 bg-white nested-copy-line-height"><div class="bg-white mb3 pa4 gray overflow-hidden"><span class="f6 db">Posts</span><h1 class="f3 near-black"><a href=/blog/2013/01/08/hybrid-persistence/ class="link black dim">Hybrid Persistence</a></h1><div class="nested-links f5 lh-copy nested-copy-line-height">Often times the business requirements demand for database features that aren&rsquo;t easily achievable using a single type of database. And now we have quite a few options to choose from, for example Key Value stores, Document databases, Relational databases etc, each providing some mutually exclusive features from the rest. So, it can be tempting to introduce multiple databases to rip the benefits of each.
But, it comes with a few gotchas that are worth knowing.</div></div></div></div><div class="relative w-100 mb4 bg-white"><div class="relative w-100 mb4 bg-white nested-copy-line-height"><div class="bg-white mb3 pa4 gray overflow-hidden"><span class="f6 db">Posts</span><h1 class="f3 near-black"><a href=/blog/2012/12/14/how-much-to-validate/ class="link black dim">How much to validate?</a></h1><div class="nested-links f5 lh-copy nested-copy-line-height">Input validation is often required to safe guard against inappropriate use. For example, consider the following API:
class TransfersController def create() from_account_id, to_account_id, amount = params[:from_account_id], params[:to_account_id], params[:amount] from_account = Account.find(from_account_id) to_account = Account.find(to_account_id) @transfer = Transfer.create!(from_account, to_account, amount) redirect_to @transfer end end In this case, the API is expecting a from_account_id which we know, can be easily exploited unless a validation is performed on the server. Say, a simple validation would do this:</div></div></div></div><div class="relative w-100 mb4 bg-white"><div class="relative w-100 mb4 bg-white nested-copy-line-height"><div class="bg-white mb3 pa4 gray overflow-hidden"><span class="f6 db">Posts</span><h1 class="f3 near-black"><a href=/blog/2012/11/06/orm-or-not/ class="link black dim">ORM or Not?</a></h1><div class="nested-links f5 lh-copy nested-copy-line-height">Yes to ORM, No to custom queries. Here&rsquo;s a bullet list:
You&rsquo;d probably end up writing your own ORM anyway. Doing so, you&rsquo;d spend a lot of money writing library level code instead of your business logic. The time tested ones are likely to be better than yours. Beware, you&rsquo;d have to figure out some complex issues: connection pooling, concurrency/locking, caching, transactions, updates, versioning, documentation etc. If you find yourself ORM is falling short of what you need, you&rsquo;re either presenting information overload or using a transactional database as a reporting store.</div></div></div></div><div class="relative w-100 mb4 bg-white"><div class="relative w-100 mb4 bg-white nested-copy-line-height"><div class="bg-white mb3 pa4 gray overflow-hidden"><span class="f6 db">Posts</span><h1 class="f3 near-black"><a href=/blog/2012/08/05/design-of-a-mongodb-analytics-database/ class="link black dim">Design of a MongoDB Analytics Database</a></h1><div class="nested-links f5 lh-copy nested-copy-line-height">We built a MongoDB based realtime analytics solution and learned a few things in the process. I would like to share some of our learnings in this post.
When tasked to find a good database for holding realtime analytics data, I was searching through the wisdom of internet to come up with a good choice. At a high level, the database needed to deliver the following:
Atomic counters so that events could be counted fast.</div></div></div></div><div class="relative w-100 mb4 bg-white"><div class="relative w-100 mb4 bg-white nested-copy-line-height"><div class="bg-white mb3 pa4 gray overflow-hidden"><span class="f6 db">Posts</span><h1 class="f3 near-black"><a href=/blog/2012/01/17/object-versioning-is-open-design/ class="link black dim">Object Versioning is an Open Design Problem</a></h1><div class="nested-links f5 lh-copy nested-copy-line-height">This unsolvable maze is a local food from Bangladesh, known as Jilapi
Photo credits to&nbsp;udvranto pothikObject Versioning is often required by a business rule, for example, to maintain an audit trail or to be able to revert to a previous version, etc. This is the 3rd time in my career where this Object Versioning requirement made me think like -
There's gotta be an easier solution!&nbsp;But, I am yet to find one.</div></div></div></div><div class="relative w-100 mb4 bg-white"><div class="relative w-100 mb4 bg-white nested-copy-line-height"><div class="bg-white mb3 pa4 gray overflow-hidden"><span class="f6 db">Posts</span><h1 class="f3 near-black"><a href=/blog/2011/09/28/perils-of-soft-delete/ class="link black dim">The Perils of Soft Delete</a></h1><div class="nested-links f5 lh-copy nested-copy-line-height">Often times, applications cannot get rid of the database records for business rules. For example, if you are a cable TV provider, you might have a customer calling you to stop the National Geographic Channel subscription from next month.&nbsp;Ideally you would like to delete this record, but you can't do it until the effective date:( If you delete it, the next invoice will not be able to charge for this channel, although it's still being used.</div></div></div></div><div class="relative w-100 mb4 bg-white"><div class="relative w-100 mb4 bg-white nested-copy-line-height"><div class="bg-white mb3 pa4 gray overflow-hidden"><span class="f6 db">Posts</span><h1 class="f3 near-black"><a href=/blog/2011/06/22/service-api-and-exceptions/ class="link black dim">Service API and Exceptions</a></h1><div class="nested-links f5 lh-copy nested-copy-line-height">Too often I see I am using a REST/SOAP API to talk to a third party system that frustrates me because of poor error messaging. Here's an example to illustrate a typical frustration:
Call: city_service.update_residence_address(city_dueler, new_address)
Response: &lt;status>Failed&lt;/status>&lt;error>Invalid address&lt;/error>
But the address just seems right to me. So, I need to know specific reason about why the address is wrong. The error message leaves this critical detail. What happens next is, I look for the log files created by the city_service, conceptually supposed to be a third party hosted service.</div></div></div></div><div class="relative w-100 mb4 bg-white"><div class="relative w-100 mb4 bg-white nested-copy-line-height"><div class="bg-white mb3 pa4 gray overflow-hidden"><span class="f6 db">Posts</span><h1 class="f3 near-black"><a href=/blog/2011/01/28/actionmailer-3-why-do-you-call-instance/ class="link black dim">ActionMailer 3 - why do you call instance methods as class/self methods?</a></h1><div class="nested-links f5 lh-copy nested-copy-line-height">I didn't even notice this little trick! As long as I didn't have to call deliver_welcome_message (or deliver_*) methods that would magically call welcome_message, I was happy that now the magic is gone. Things are transparent!
Here's an example showing the change: Say you have the following mailer:
class Notifier &lt; ActionMailer::Base
def welcome_message(new_user)
#a warm welcome message
end
endNow, prior to Rails 3, or ActionMailer 3, you would write the following to actually call this method to get the benefits of ActionMailer magics, such as finding the view based on method name and so on:</div></div></div></div><div class="relative w-100 mb4 bg-white"><div class="relative w-100 mb4 bg-white nested-copy-line-height"><div class="bg-white mb3 pa4 gray overflow-hidden"><span class="f6 db">Posts</span><h1 class="f3 near-black"><a href=/blog/2010/09/15/oo-design-dilemma-auditing-changes/ class="link black dim">OO Design Dilemma: Auditing Changes Across Hierarchical Objects</a></h1><div class="nested-links f5 lh-copy nested-copy-line-height">Here is a sample UML class diagram of the situation that posed me the OO design dilemma a few days ago.
Let me explain with an example,
The Electronic Items catalog has many Televisions. The Sony Televisions come with different specifications, such as refresh rate of 240 Hz, 120 Hz and 60 Hz. However, the 240 Hz ones also comes in different colors - Black and Grey.Now, a store manager needs to see the recent changes across all catalogs, such as electronic items, musical instruments and so on.</div></div></div></div><div class="relative w-100 mb4 bg-white"><div class="relative w-100 mb4 bg-white nested-copy-line-height"><div class="bg-white mb3 pa4 gray overflow-hidden"><span class="f6 db">Posts</span><h1 class="f3 near-black"><a href=/blog/2009/07/16/rails-modeling-guide1-right-structure/ class="link black dim">Rails modeling guide#1: right structure of a ruby on rails model</a></h1><div class="nested-links f5 lh-copy nested-copy-line-height">Rails models are no exception compared to the super models! You are in the business if and only if you got a good physical structure and can stick to it for years...
At Code71, we are keeping our rails models attractive following a few guidelines. I will be posting these guidelines in a series and here goes the first one - about the physical structure of the ruby on rails models.</div></div></div></div><div class="relative w-100 mb4 bg-white"><div class="relative w-100 mb4 bg-white nested-copy-line-height"><div class="bg-white mb3 pa4 gray overflow-hidden"><span class="f6 db">Posts</span><h1 class="f3 near-black"><a href=/blog/2009/07/16/rails-modeling-guide2-naming-ruby-on/ class="link black dim">Rails modeling guide#2: naming convention for ruby on rails model methods</a></h1><div class="nested-links f5 lh-copy nested-copy-line-height">Naming conventions play an important role to the software's overall architecture. It is not a rocket science, still, it may lead to unhappy consequences if not taken care of at the early stage of a project. This small best practices can make a code base significantly improved.
Rails does a good job by using the dynamic power of ruby and providing with a handful of dynamic methods with the models.</div></div></div></div></section></div></main><footer class="bg-navy bottom-0 w-100 pa3" role=contentinfo><div class="flex justify-between"><a class="f4 fw4 hover-white no-underline white-70 dn dib-ns pv2 ph3" href=http://smsohan.com/>&copy; Sohan's Blog 2024</a><div><div class=ananke-socials></div></div></div></footer></body></html>