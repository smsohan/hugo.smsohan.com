<!doctype html><html lang=en-us><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge,chrome=1"><title>Object Versioning is an Open Design Problem | Sohan's Blog</title><meta name=viewport content="width=device-width,minimum-scale=1"><meta name=description content="This unsolvable maze is a local food from Bangladesh, known as Jilapi
Photo credits to&nbsp;udvranto pothikObject Versioning is often required by a business rule, for example, to maintain an audit trail or to be able to revert to a previous version, etc. This is the 3rd time in my career where this Object Versioning requirement made me think like -
There's gotta be an easier solution!&nbsp;But, I am yet to find one."><meta name=generator content="Hugo 0.108.0"><meta name=robots content="noindex, nofollow"><link rel=stylesheet href=/ananke/css/main.min.css><meta property="og:title" content="Object Versioning is an Open Design Problem"><meta property="og:description" content="This unsolvable maze is a local food from Bangladesh, known as Jilapi
Photo credits to&nbsp;udvranto pothikObject Versioning is often required by a business rule, for example, to maintain an audit trail or to be able to revert to a previous version, etc. This is the 3rd time in my career where this Object Versioning requirement made me think like -
There's gotta be an easier solution!&nbsp;But, I am yet to find one."><meta property="og:type" content="article"><meta property="og:url" content="http://smsohan.com/blog/2012/01/17/object-versioning-is-open-design/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2012-01-17T00:00:00+00:00"><meta property="article:modified_time" content="2012-01-17T00:00:00+00:00"><meta itemprop=name content="Object Versioning is an Open Design Problem"><meta itemprop=description content="This unsolvable maze is a local food from Bangladesh, known as Jilapi
Photo credits to&nbsp;udvranto pothikObject Versioning is often required by a business rule, for example, to maintain an audit trail or to be able to revert to a previous version, etc. This is the 3rd time in my career where this Object Versioning requirement made me think like -
There's gotta be an easier solution!&nbsp;But, I am yet to find one."><meta itemprop=datePublished content="2012-01-17T00:00:00+00:00"><meta itemprop=dateModified content="2012-01-17T00:00:00+00:00"><meta itemprop=wordCount content="409"><meta itemprop=keywords content><meta name=twitter:card content="summary"><meta name=twitter:title content="Object Versioning is an Open Design Problem"><meta name=twitter:description content="This unsolvable maze is a local food from Bangladesh, known as Jilapi
Photo credits to&nbsp;udvranto pothikObject Versioning is often required by a business rule, for example, to maintain an audit trail or to be able to revert to a previous version, etc. This is the 3rd time in my career where this Object Versioning requirement made me think like -
There's gotta be an easier solution!&nbsp;But, I am yet to find one."><style>.athelas,.body-text{font-family:helvetica neue,Helvetica,Arial,sans-serif}.body-text div,p,article,section{font-size:1rem;line-height:1.4rem}.athelas.fw1{font-weight:inherit}h1.f1{line-height:4rem}</style></head><body class="ma0 body-text"><header><div class=bg-navy><nav class="pv3 ph3 ph4-ns" role=navigation><div class="flex-l justify-between items-center center"><a href=/ class="f3 fw2 hover-white no-underline white-90 dib">Sohan's Blog</a><div class="flex-l items-center"><ul class="pl0 mr3"><li class="list f5 f4-ns fw4 dib pr3"><a class="hover-white no-underline white-90" href=/home/ title="About page">About</a></li></ul><div class=ananke-socials></div></div></div></nav></div></header><main class=pb7 role=main><article class="flex-l flex-wrap justify-between mw8 center ph3"><header class="mt4 w-100"><aside class="instapaper_ignoref b helvetica tracked">POSTS</aside><div id=sharing class="mt3 ananke-socials"></div><h1 class="f1 athelas mt3 mb1">Object Versioning is an Open Design Problem</h1><time class="f6 mv4 dib tracked" datetime=2012-01-17T00:00:00Z>January 17, 2012</time></header><div class="nested-copy-line-height lh-copy body-text f4 nested-links mid-gray pr4-l w-two-thirds-l"><div class=post><div dir=ltr style=text-align:left trbidi=on><br><table cellpadding=0 cellspacing=0 class=tr-caption-container style=float:right;text-align:center><tbody><tr><td style=text-align:center><a href=http://farm3.staticflickr.com/2517/3874492115_e69defd351.jpg imageanchor=1 style=margin-left:auto;margin-right:auto><img border=0 height=213 src=http://farm3.staticflickr.com/2517/3874492115_e69defd351.jpg width=320></a></td></tr><tr><td class=tr-caption style=text-align:center>This unsolvable maze is a local food from Bangladesh, known as Jilapi<br>Photo credits to&nbsp;<span style=background-color:#fefefe;color:blue;font-family:Arial,Helvetica,sans-serif;font-size:12px;line-height:18px;text-align:left;text-decoration:none><a href=http://www.flickr.com/photos/udvranto_pothik/ style=background-color:#fefefe;font-family:Arial,Helvetica,sans-serif;font-size:12px;line-height:18px;text-align:left;text-decoration:none>udvranto pothik</a></span></td></tr></tbody></table>Object Versioning is often required by a business rule, for example, to maintain an audit trail or to be able to revert to a previous version, etc. This is the 3rd time in my career where this Object Versioning requirement made me think like -<br><blockquote class=tr_bq>There's gotta be an easier solution!&nbsp;</blockquote>But, I am yet to find one. So, I am thinking it's one of those open design problems, may be.<br><br>To clarify the requirement with an example, let's consider the following scenario:<br><br>A lawyer is preparing a document for one of her clients using a software. On January 17th, she needs to take a look at the version of the same document from May last year so that she can backtrace some changes that took place during these months.<br><br>Lets assume the lawyer is using a software that stores the documents in a relational database with the following schema.<br><pre>A Document has many Evidences, each provided by an EvidenceProvider<br><br>Document (id, client_id, case_id, name)<br>Evidence (id, document_id, evidence_provider_id, details)<br>EvidenceProvider(id, name)<br></pre>Now, given the versioning requirement how would you design your data model?<br><br>Here's a couple of points that your design should address at a minimum:<br><ul style=text-align:left><li>Going back to a version means a complete snapshot of the old version of the document. So, the version of May 1st should only bring the evidences that were there on that very day.</li><li>As a new version is created, it should inherit all previous evidences.</li></ul>As I have mentioned earlier, I am yet to find a good data model that can take care of these concerns without over-complicating everything. Let me know if you got a beautiful solution to this problem.<br><br>However, in my latest project, the requirement is even harder. It's somewhat like this:<br><br>The lawyer may have some documents in the "work in progress version". This means, if she needs to print a document for the court, she only wants to print the last "good version", skipping the "work in progress version".<br><br>Also, when there is such a "work in progress version", she needs to attach any new Evidence to both the last "good version" as well as to the "work in progress version".<br><br>Well, now you see the design of a data model for Object Versioning becomes really messy and unintuitive.<br><blockquote class=tr_bq>So, here's my question to you - how would you design a solution for this?</blockquote></div></div><ul class=pa0></ul><div class="mt6 instapaper_ignoref"></div></div><aside class="w-30-l mt6-l"></aside></article></main><footer class="bg-navy bottom-0 w-100 pa3" role=contentinfo><div class="flex justify-between"><a class="f4 fw4 hover-white no-underline white-70 dn dib-ns pv2 ph3" href=http://smsohan.com/>&copy; Sohan's Blog 2023</a><div><div class=ananke-socials></div></div></div></footer></body></html>