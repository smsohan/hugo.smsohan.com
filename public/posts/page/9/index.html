<!doctype html><html lang=en-us><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge,chrome=1"><title>Sohan's Blog</title><meta name=viewport content="width=device-width,minimum-scale=1"><meta name=description content="Sohan's Blog"><meta name=generator content="Hugo 0.108.0"><meta name=robots content="noindex, nofollow"><link rel=stylesheet href=/ananke/css/main.min.css><link href=/posts/index.xml rel=alternate type=application/rss+xml title="Sohan's Blog"><link href=/posts/index.xml rel=feed type=application/rss+xml title="Sohan's Blog"><meta property="og:title" content="Posts"><meta property="og:description" content="Sohan's Blog"><meta property="og:type" content="website"><meta property="og:url" content="http://smsohan.com/posts/"><meta itemprop=name content="Posts"><meta itemprop=description content="Sohan's Blog"><meta name=twitter:card content="summary"><meta name=twitter:title content="Posts"><meta name=twitter:description content="Sohan's Blog"><style>.athelas,.body-text{font-family:helvetica neue,Helvetica,Arial,sans-serif}.body-text div,p,article,section{font-size:1rem;line-height:1.4rem}.athelas.fw1{font-weight:inherit}h1.f1{line-height:4rem}</style></head><body class="ma0 body-text"><header><div class="pb3-m bg-navy"><nav class="pv3 ph3 ph4-ns" role=navigation><div class="flex-l justify-between items-center center"><a href=/ class="f3 fw2 hover-white no-underline white-90 dib">Sohan's Blog</a><div class="flex-l items-center"><ul class="pl0 mr3"><li class="list f5 f4-ns fw4 dib pr3"><a class="hover-white no-underline white-90" href=/home/ title="About page">About</a></li></ul><div class=ananke-socials></div></div></div></nav></div></header><main class=pb7 role=main><article class="pa3 pa4-ns nested-copy-line-height"><section class="cf ph3 ph5-l pv3 pv4-l f4 tc-l center measure-wide lh-copy mid-gray"></section><section class="flex-ns flex-wrap justify-around mt5"><div class="relative w-100 w-30-l mb4 bg-white"><div class="relative w-100 mb4 bg-white nested-copy-line-height"><div class="bg-white mb3 pa4 gray overflow-hidden"><span class="f6 db">Posts</span><h1 class="f3 near-black"><a href=/blog/2013/02/07/activerecord-callbacks/ class="link black dim">Are ActiveRecord Callbacks Any Good?</a></h1><div class="nested-links f5 lh-copy nested-copy-line-height">Wanted to share my thoughts on ActiveRecord Callbacks. I&rsquo;d like to know your thoughts if you disagree. Please use the comments.
Only use them when the behavior is must have under all situations, including your tests. For example, we know email addresses are case-insensitive. So no matter what, we may always want to store a lower cased version in the db. #Good class User &lt; ActiveRecord::Base before_save :downcase_email def downcase_email email.</div></div></div></div><div class="relative w-100 w-30-l mb4 bg-white"><div class="relative w-100 mb4 bg-white nested-copy-line-height"><div class="bg-white mb3 pa4 gray overflow-hidden"><span class="f6 db">Posts</span><h1 class="f3 near-black"><a href=/blog/2013/01/24/rejecting-because-it-didnt-work-last-time/ class="link black dim">Rejecting Because It Didn't Work Last Time</a></h1><div class="nested-links f5 lh-copy nested-copy-line-height">&mldr; is as right as &ldquo;the weather will be bad today because it wasn&rsquo;t any good yesterday&rdquo;.</div></div></div></div><div class="relative w-100 w-30-l mb4 bg-white"><div class="relative w-100 mb4 bg-white nested-copy-line-height"><div class="bg-white mb3 pa4 gray overflow-hidden"><span class="f6 db">Posts</span><h1 class="f3 near-black"><a href=/blog/2013/01/21/on-activerecord-query-enhancers/ class="link black dim">On ActiveRecord Query Enhancers</a></h1><div class="nested-links f5 lh-copy nested-copy-line-height">The question is, should we use the third-party ActiveRecord Query Enhancers like SearchLogic/Squeel/MetaSearch?
Quoting from Squeel&rsquo;s Github README page,
Squeel lets you rewrite... Article.where ['created_at >= ?', 2.weeks.ago] ...as... Article.where{created_at >= 2.weeks.ago} This is a good thing. If you don't agree, Squeel might not be for you. At work, we are migrating a Rails 3.0 project into Rails 3.2. We used MetaSearch in the project quite extensively and now discussing if using Squeel (successor of MetaSearch for newer Rails versions) would be a good decision.</div></div></div></div><div class="relative w-100 w-30-l mb4 bg-white"><div class="relative w-100 mb4 bg-white nested-copy-line-height"><div class="bg-white mb3 pa4 gray overflow-hidden"><span class="f6 db">Posts</span><h1 class="f3 near-black"><a href=/blog/2013/01/17/abusing-json/ class="link black dim">MongoDB is Abusing JSON!</a></h1><div class="nested-links f5 lh-copy nested-copy-line-height">I find the MongoDB API is abusing JSON in a really bad way. JSON is probably a good format for storing the documents in MongoDB, but using JSON for it&rsquo;s weird API is simply a terrible idea. Here&rsquo;s an example from the SQL to Aggregation Framework Mapping Chart
db.orders.aggregate( [ { $group: { _id: { cust_id: "$cust_id", ord_date: "$ord_date" }, total: { $sum: "$price" } } }, { $match: { total: { $gt: 250 } } } ] ) I find the UI of this query to be distasteful at the best.</div></div></div></div><div class="relative w-100 w-30-l mb4 bg-white"><div class="relative w-100 mb4 bg-white nested-copy-line-height"><div class="bg-white mb3 pa4 gray overflow-hidden"><span class="f6 db">Posts</span><h1 class="f3 near-black"><a href=/blog/2013/01/08/hybrid-persistence/ class="link black dim">Hybrid Persistence</a></h1><div class="nested-links f5 lh-copy nested-copy-line-height">Often times the business requirements demand for database features that aren&rsquo;t easily achievable using a single type of database. And now we have quite a few options to choose from, for example Key Value stores, Document databases, Relational databases etc, each providing some mutually exclusive features from the rest. So, it can be tempting to introduce multiple databases to rip the benefits of each.
But, it comes with a few gotchas that are worth knowing.</div></div></div></div><div class="relative w-100 w-30-l mb4 bg-white"><div class="relative w-100 mb4 bg-white nested-copy-line-height"><div class="bg-white mb3 pa4 gray overflow-hidden"><span class="f6 db">Posts</span><h1 class="f3 near-black"><a href=/blog/2012/12/14/how-much-to-validate/ class="link black dim">How much to validate?</a></h1><div class="nested-links f5 lh-copy nested-copy-line-height">Input validation is often required to safe guard against inappropriate use. For example, consider the following API:
class TransfersController def create() from_account_id, to_account_id, amount = params[:from_account_id], params[:to_account_id], params[:amount] from_account = Account.find(from_account_id) to_account = Account.find(to_account_id) @transfer = Transfer.create!(from_account, to_account, amount) redirect_to @transfer end end In this case, the API is expecting a from_account_id which we know, can be easily exploited unless a validation is performed on the server. Say, a simple validation would do this:</div></div></div></div><div class="relative w-100 w-30-l mb4 bg-white"><div class="relative w-100 mb4 bg-white nested-copy-line-height"><div class="bg-white mb3 pa4 gray overflow-hidden"><span class="f6 db">Posts</span><h1 class="f3 near-black"><a href=/blog/2012/12/12/what-programming-language-should-i-learn-in-2013/ class="link black dim">What Programming Language Should I Learn in 2013?</a></h1><div class="nested-links f5 lh-copy nested-copy-line-height">I like the idea of learning one new programming language every year. This is also mentioned at The Pragmatic Programmer Book. I&rsquo;m now looking for a new language to learn.
In 2011, I learned F#, my first functional programming language experience. It&rsquo;s a really nice language, especially if you&rsquo;re familiar with the .Net class library and the windows development echo system in general. This was really fun, learned the basic concepts and building blocks of functional languages.</div></div></div></div><div class="relative w-100 w-30-l mb4 bg-white"><div class="relative w-100 mb4 bg-white nested-copy-line-height"><div class="bg-white mb3 pa4 gray overflow-hidden"><span class="f6 db">Posts</span><h1 class="f3 near-black"><a href=/blog/2012/12/06/the-myth-of-one-assert-per-test/ class="link black dim">The Myth of One Assert Per Test</a></h1><div class="nested-links f5 lh-copy nested-copy-line-height">TL;DR; It&rsquo;s not one assert per test, rather one logical path per test.
I find this to be a classical example of how an inappropriate choice of terminology leads to huge confusion. In trying to find the original source of the &ldquo;one assertion per test&rdquo; quote, google came back only with a bunch of confused blog entries :(
Without much ranting, lets see a code example to start with:</div></div></div></div><div class="relative w-100 w-30-l mb4 bg-white"><div class="relative w-100 mb4 bg-white nested-copy-line-height"><div class="bg-white mb3 pa4 gray overflow-hidden"><span class="f6 db">Posts</span><h1 class="f3 near-black"><a href=/blog/2012/11/28/readable-unit-tests/ class="link black dim">Readable Unit Tests</a></h1><div class="nested-links f5 lh-copy nested-copy-line-height">From my experience with writing/reading unit tests for years, here&rsquo;s a little guideline to keep &rsquo;em readable:
A unit test needs to fit entirely (including setups) on a screen without scrolling. It is OK to have a little bit of duplication in unit tests for readability. Avoid nesting of contexts beyond 2 levels. Instead, use methods to setup and flatten. Do not use if/else/loops in a unit test. If your test needs too much setup/mocking/stubbing, time to refactor the code.</div></div></div></div><div class="relative w-100 w-30-l mb4 bg-white"><div class="relative w-100 mb4 bg-white nested-copy-line-height"><div class="bg-white mb3 pa4 gray overflow-hidden"><span class="f6 db">Posts</span><h1 class="f3 near-black"><a href=/blog/2012/11/27/unit-testing-asynchronous-side-effects/ class="link black dim">Unit Testing and Sleep</a></h1><div class="nested-links f5 lh-copy nested-copy-line-height">If your unit test code needs a sleep, its time to refactor it. Ideally, you&rsquo;d only need to stub/mock the asynchronous call instead of introducing arbitrary sleeps in the test code, because they will eventually fail. Moreover, until it fails, it will slow down your test runner.</div></div></div></div></section><ul class="pagination pagination-default"><li class=page-item><a href=/posts/ aria-label=First class=page-link role=button><span aria-hidden=true>&#171;&#171;</span></a></li><li class=page-item><a href=/posts/page/8/ aria-label=Previous class=page-link role=button><span aria-hidden=true>&#171;</span></a></li><li class=page-item><a href=/posts/page/7/ aria-label="Page 7" class=page-link role=button>7</a></li><li class=page-item><a href=/posts/page/8/ aria-label="Page 8" class=page-link role=button>8</a></li><li class="page-item active"><a aria-current=page aria-label="Page 9" class=page-link role=button>9</a></li><li class=page-item><a href=/posts/page/10/ aria-label="Page 10" class=page-link role=button>10</a></li><li class=page-item><a href=/posts/page/11/ aria-label="Page 11" class=page-link role=button>11</a></li><li class=page-item><a href=/posts/page/10/ aria-label=Next class=page-link role=button><span aria-hidden=true>&#187;</span></a></li><li class=page-item><a href=/posts/page/25/ aria-label=Last class=page-link role=button><span aria-hidden=true>&#187;&#187;</span></a></li></ul></article></main><footer class="bg-navy bottom-0 w-100 pa3" role=contentinfo><div class="flex justify-between"><a class="f4 fw4 hover-white no-underline white-70 dn dib-ns pv2 ph3" href=http://smsohan.com/>&copy; Sohan's Blog 2023</a><div><div class=ananke-socials></div></div></div></footer></body></html>